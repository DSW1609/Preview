<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>我的推广码</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="css/swiper.min.css">
  <link rel="stylesheet" href="css/share.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/swiper.min.js"></script>
  <script src="js/html2canvas.min.js"></script>
</head>

<body>
  <!-- HEAD -->
  <div class="S_Head">
  </div>
  <!-- HEAD -->
  <!-- 轮播图部分 -->
  <div id="sw0" class="swiper-container swiper-container-initialized swiper-container-horizontal">
    <div class="swiper-wrapper">
      <!-- 单张轮播图 -->
      <div class="swiper-slide">
        <!-- 盛放二维码和背景图的盒子 -->
        <div class="S_Ct">
          <!-- 二维码 -->
          <div class="S_EWM S_EWM1">
            <img src="img/GZH.jpg" alt="">
          </div>
          <!-- 轮播图背景 -->
          <img class="S_Sw_Bg" src="img/fx1.jpg" alt="">
        </div>
      </div>
      <!-- 单张轮播图 -->
      <div class="swiper-slide">
        <!-- 盛放二维码和背景图的盒子 -->
        <div class="S_Ct">
          <!-- 二维码 -->
          <div class="S_EWM S_EWM2">
            <img src="img/GZH.jpg" alt="">
          </div>
          <!-- 轮播图背景 -->
          <img class="S_Sw_Bg" src="img/fx2.jpg" alt="">
        </div>
      </div>
      <!-- 单张轮播图 -->
      <div class="swiper-slide">
        <!-- 盛放二维码和背景图的盒子 -->
        <div class="S_Ct">
          <!-- 二维码 -->
          <div class="S_EWM S_EWM3">
            <img src="img/GZH.jpg" alt="">
          </div>
          <!-- 轮播图背景 -->
          <img class="S_Sw_Bg" src="img/fx3.jpg" alt="">
        </div>
      </div>
      <!-- 单张轮播图 -->
      <div class="swiper-slide">
        <!-- 盛放二维码和背景图的盒子 -->
        <div class="S_Ct">
          <!-- 二维码 -->
          <div class="S_EWM S_EWM4">
            <img src="img/GZH.jpg" alt="">
          </div>
          <!-- 轮播图背景 -->
          <img class="S_Sw_Bg" src="img/fx4.jpg" alt="">
        </div>
      </div>
      <!-- 单张轮播图 -->
      <div class="swiper-slide">
        <!-- 盛放二维码和背景图的盒子 -->
        <div class="S_Ct">
          <!-- 二维码 -->
          <div class="S_EWM S_EWM5">
            <img src="img/GZH.jpg" alt="">
          </div>
          <!-- 轮播图背景 -->
          <img class="S_Sw_Bg" src="img/fx5.jpg" alt="">
        </div>
      </div>
    </div>
    <div class="swiper-scrollbar"></div>
  </div>
  <!-- 生成按钮 -->
  <div class="share_mk">生成图片</div>
  <!-- 图片 -->
  <div class="S_CVS">
    <img class="S_V_Img" src="" alt="">
    <!-- 控制按钮 -->
    <div class="S_Mk_K">
      <!-- 长按图片保存 -->
      <div class="share_mk_k share_mk_c">长按上方图片保存</div>
      <!-- 关闭按钮 -->
      <div class="share_mk_k S_Mk_Gb"></div>
    </div>
  </div>
  <script>
    $(function () {
      // 轮播图控制
      var swiper = new Swiper('.swiper-container', {
        loop: true,
        // 惯性滑动
        // freeMode: true,
        // 自动切换
        // autoplay: {
        //   delay: 3000,
        // },
        slideToClickedSlide: true,
        slidesPerView: 'auto',
        spaceBetween: 20,
        centeredSlides: true,
        on: {
          // 切换事件
          slideChange: function () {
            // 修改id名 - 不同id对应伪类图片不同
            $(".swiper-container").attr("id", "sw" + this.realIndex);
          }
        },
        // 滚动条
        scrollbar: {
          el: '.swiper-scrollbar',
          draggable: true,
        },
      });
      // 生成图片点击事件
      $(".share_mk").click(function () {
        var canvas2 = document.createElement("canvas");
        let _canvas = document.querySelector(".swiper-slide-active");
        var w = parseInt(window.getComputedStyle(_canvas).width);
        var h = parseInt(window.getComputedStyle(_canvas).height);
        canvas2.width = w * 3;
        canvas2.height = h * 3;
        canvas2.style.width = w + "px";
        canvas2.style.height = h + "px";
        canvas2.classList.add("S_CVS")
        var context = canvas2.getContext("2d");
        context.scale(1, 1);
        html2canvas(_canvas, {
          canvas: canvas2
        }).then(function (canvas) {
          var strDataURI = canvas.toDataURL("image/png");
          // var strDataURI = "cs";
          $(".S_V_Img").attr("src", strDataURI);
          // 显示
          $(".S_CVS").fadeIn();
          // 隐藏生成图片按钮
          $(".share_mk").hide();
          // 关闭按钮点击事件
          $(".S_Mk_Gb").click(function () {
            $(".S_CVS").fadeOut();
            // 显示生成图片按钮
            $(".share_mk").show();
          })
        })
      })
    })
  </script>
</body>

</html>